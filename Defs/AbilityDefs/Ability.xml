<?xml version="1.0" encoding="utf-8" ?>
<Defs>

    <AbilityDef ParentName="AK_OperatorIDBase">
        <defName>LOF_VAbility_Astro</defName>
        <label>Astrologer</label>
        <description>Insight into Everything.</description>
        <abilityClass>Astrologer.Insight.VAB_AstroTracker</abilityClass>
        <iconPath>UI/Element/Placeholder</iconPath>
    </AbilityDef>
    <!--==================== 洞察力技能 ====================-->
    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Monitor</defName>
        <label>Astrologer's Insight</label>
        <description>Insight Recovery Progress\n
Introduce:\nInsight is a unique ability of the astrologer race.Many exclusive skills rely on insight to release.\n\n
Tips:\nWhen the Astrologer is near the Starlight Grass,the insight recovery speed will be faster.</description>
        <icon>UI/Element/Placeholder</icon>
        <displayGizmoUndraft>true</displayGizmoUndraft>
        <abilityClass>Astrologer.Ability.AKAbility_Monitor</abilityClass>
        <compEffectList/>
        <cooldownProperty/>
    </AKA_Ability.AKAbilityDef>
    <!--技能显示顺序是和列表顺序反着来的-->

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_FireMode</defName>
        <label>change Astrologer's wepaon firemode</label>
        <description>desc.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>Astrologer.Ability.AKAbility_FireMode</abilityClass>
        <compEffectList/>
        <cooldownProperty/>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_IncreaseHarvest</defName>
        <label>Great harvest</label>
        <description>consume a certain amount of insight to increase crop harvest,slaughter volume,surgery success rate,high quality probability of crafting items,shooting hit rate in one day.\nFood consumption rate x200%.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_SelfTarget</abilityClass>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>50</amount>
                <failReason>Lack of Insight</failReason>
            </li>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect_AddHediff">
                <hediffDef>LOF_Hediff_IncreaseHarvest</hediffDef>
                <severity>2.4</severity>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>50</amount>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_CostChargeStatic"/>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <cooldownProperty>
            <SPPerCharge>15</SPPerCharge>
            <SPUnit>day</SPUnit>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>


    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Teleport</defName>
        <label>Teleport to</label>
        <description>desc.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>40</range>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AE_TeleportSelfToTarget"/>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>15</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>800000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_UnstableCatalyst</defName>
        <label>Enter Unstable State</label>
        <description>Continuously consuming insight can enter an unstable state.\nThere is a 50% chance that being hit will not cause damage.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_SelfTarget</abilityClass>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>50</amount>
                <failReason>Lack of Insight</failReason>
            </li>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="Astrologer.Ability.AE_IgnoreDmg"/>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>50</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <cooldownProperty>
            <SPPerCharge>15</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>800000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_LeechAttack</defName>
        <label>Leech Attack</label>
        <description>consumes Insight continuously.fixed health restoration when dealing damage to enemies.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Auto</abilityClass>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>1</amount>
                <failReason>Lack of Insight</failReason>
            </li>
        </castConditions>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <cooldownProperty>
            <SPPerCharge>12</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>8000000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <Def Class="AKA_Ability.AbilityEffectsDef">
        <defName>LOF_Effect_ThrowSmoke</defName>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AE_DoEffectFX">
                <doVisualEffects>true</doVisualEffects>
                <doFlash>false</doFlash>
                <doSmoke>true</doSmoke>
                <radiusRange>10~12</radiusRange>
            </li>
        </compEffectList>
    </Def>
    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_GravityDeflection</defName>
        <label>Release Gravitational Deflection Dust</label>
        <description>consume Insight to release a cloud of Gravitational Deflection Dust,which deflects bullets and charged shots.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <reqLineofSight>true</reqLineofSight>
        <range>40</range>
        <field>10</field>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="Astrologer.Ability.AE_Spawn">
                <thing>LOF_GravityDeflectionDust</thing>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_DelayedEffects">
                <delayedEffect>LOF_Effect_ThrowSmoke</delayedEffect>
                <burstCount>6</burstCount>
                <burstInterval>250</burstInterval>
                <effectorType>AKA_Ability.DelayedEffects.DelayedEffectorBase</effectorType>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>12</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>8000000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <Def Class="AKA_Ability.AbilityEffectsDef">
        <defName>LOF_Effect_AnchoredStance</defName>
        <compEffectList>
            <li Class="Astrologer.Ability.AE_AddHediffRadial">
                <radius>10</radius>
                <hediffDef>LOF_Hediff_AnchoredStance</hediffDef>
                <severity>1</severity>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_DoEffectFX">
                <doVisualEffects>true</doVisualEffects>
                <radiusRange>6~12</radiusRange>
                <screenShakeFactor>0.1</screenShakeFactor>
                <fxInteriorFleck>LightningGlow</fxInteriorFleck>
                <useSounds>
                    <li>Psycast_Skip_Entry</li>
                </useSounds>
            </li>
        </compEffectList>
    </Def>
    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_AnchoredStance</defName>
        <label>Release AnchoredStance</label>
        <description>consume Insight to create a field that nullifies enemies' dodge chance.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <reqLineofSight>true</reqLineofSight>
        <range>40</range>
        <field>10</field>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
            <!--li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/-->
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AE_DelayedEffects">
                <delayedEffect>LOF_Effect_AnchoredStance</delayedEffect>
                <delayFirstEffect>true</delayFirstEffect>
                <burstCount>10</burstCount>
                <burstInterval>30</burstInterval>
                <effectorType>AKA_Ability.DelayedEffects.DelayedEffectorBase</effectorType>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>12</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>8000000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_EmergencyRescue</defName>
        <label>Emergency Rescue</label>
        <description>desc.</description>
        <icon>UI/Element/HealEnhance</icon>
        <abilityClass>AKA_Ability.AKAbility_SelfTarget</abilityClass>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect_Heal">
                <healPoint>100</healPoint>
                <healHostile>false</healHostile>
                <healNeutral>false</healNeutral>
                <healNullFaction>false</healNullFaction>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <cooldownProperty>
            <SPPerCharge>1</SPPerCharge>
            <SPUnit>day</SPUnit>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_PhotonBomb</defName>
        <label>Deploy Photon Bomb</label>
        <description>this bomb can be deployed through walls.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>40</range>
        <field>10</field>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AE_ShootProjectile">
                <projectile>LOF_PhotonBomb</projectile>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>12</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>8000000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Gravitational</defName>
        <label>Create Gravitational Anchor</label>
        <description>creates a gravitational anchor that pulls enemies toward it.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <reqLineofSight>true</reqLineofSight>
        <range>40</range>
        <field>10</field>
        <castConditions>
            <li Class="Astrologer.Ability.CC_InsightThreshold">
                <amount>20</amount>
                <failReason>Lack of Insight</failReason>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AME_Singularity">
                <stunTick>250</stunTick>
            </li>
            <li Class="Astrologer.Ability.AE_CostInsight">
                <amount>20</amount>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>12</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>8000000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <!--==================== 不需要洞察力的技能 ====================-->
    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_DeployEMP</defName>
        <label>Deploy EMP Impact Pack</label>
        <description>desc.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>20</range>
        <allowInterrupt>true</allowInterrupt>
        <castConditions>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="Astrologer.Ability.AE_DeployBuilding">
                <building>LOF_ActivatedPulsePack</building>
                <apparel>LOF_Equip_EmpactPack</apparel>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_CostChargeStatic"/>
        </compEffectList>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>true</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>15</SPPerCharge>
            <SPUnit>day</SPUnit>
            <initSP>60000000</initSP>
            <maxCharge>1</maxCharge>
            <!--cooldownClass>AKA_Ability.Cooldown.CD_TrackerShared</cooldownClass-->
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Fly</defName>
        <label>低空飞行</label>
        <description>desc.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>40</range>
        <castConditions>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AE_Jump">
                <verbJump>
                    <verbClass>Verb_CastAbilityJump</verbClass>
                    <label>jump</label>
                    <soundCast>Longjump_Jump</soundCast>
                    <soundLanding>Longjump_Land</soundLanding>
                </verbJump>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_CostChargeStatic"/>
        </compEffectList>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <cooldownProperty>
            <SPPerCharge>2</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>800000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Skip</defName>
        <label>Cast Long Jump</label>
        <description>desc.</description>
        <icon>UI/Element/Placeholder</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>40</range>
        <castConditions>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge"/>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AE_Jump">
                <verbJump>
                    <verbClass>Verb_CastAbilityJump</verbClass>
                    <label>jump</label>
                    <soundCast>Longjump_Jump</soundCast>
                    <soundLanding>Longjump_Land</soundLanding>
                    <targetParams>
                        <canTargetLocations>true</canTargetLocations>
                        <canTargetPawns>false</canTargetPawns>
                        <canTargetBuildings>false</canTargetBuildings>
                    </targetParams>
                </verbJump>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_CostChargeStatic"/>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <SPPerCharge>2</SPPerCharge>
            <SPUnit>hour</SPUnit>
            <initSP>800000</initSP>
            <maxCharge>1</maxCharge>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_Coagulate</defName>
        <label>Emergency Hemostasis</label>
        <description>desc.</description>
        <icon>UI/Element/HealEnhance</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <range>40</range>
        <castConditions>
            <li Class="AKA_Ability.CastConditioner.CC_NeedCharge">
                <chargeRequire>1</chargeRequire>
                <failReason>需要填充医药</failReason>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect_Heal">
                <healPoint>10</healPoint>
                <healHostile>true</healHostile>
                <healNeutral>true</healNeutral>
                <healNullFaction>true</healNullFaction>
            </li>
            <li Class="AKA_Ability.AbilityEffect.AE_CostChargeStatic"/>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>false</canTargetLocations>
            <canTargetSelf>true</canTargetSelf>
            <canTargetPawns>true</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <cooldownClass>AKA_Ability.Cooldown.CD_TrackerShared</cooldownClass>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

    <AKA_Ability.AKAbilityDef>
        <defName>LOF_Ability_ReloadFromThing</defName>
        <label>Reload from</label>
        <description>Reload with Medicine.</description>
        <icon>UI/Element/HealEnhance</icon>
        <abilityClass>AKA_Ability.AKAbility_Targetor</abilityClass>
        <allowInterrupt>true</allowInterrupt>
        <range>2</range>
        <castConditions>
            <li Class="AKA_Ability.CastConditioner.CC_NeedFullCharge">
                <failReason>Full</failReason>
                <invert>true</invert>
            </li>
        </castConditions>
        <compEffectList>
            <li Class="AKA_Ability.AbilityEffect.AE_ReloadFromThing">
                <abilityToReload>LOF_Ability_Coagulate</abilityToReload>
                <ammoDef>MedicineIndustrial</ammoDef>
                <ammoCountPerCharge>1</ammoCountPerCharge>
            </li>
        </compEffectList>
        <useSounds>
            <li>AK_SFX_Tactboost</li>
        </useSounds>
        <targetParams>
            <canTargetLocations>true</canTargetLocations>
            <canTargetItems>true</canTargetItems>
            <canTargetSelf>false</canTargetSelf>
            <canTargetPawns>false</canTargetPawns>
        </targetParams>
        <cooldownProperty>
            <cooldownClass>AKA_Ability.Cooldown.CD_TrackerShared</cooldownClass>
        </cooldownProperty>
    </AKA_Ability.AKAbilityDef>

</Defs>